<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoCord</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="app-page">

    <div id="app-layout">
        
        <div id="main-menu-left">
            
            <div id="top-profile-widget" onclick="toggleUserMenu()">
                <div id="current-avatar-top" class="profile-avatar"></div>
                <span id="profile-name-top">Loading...</span>
            </div>
            
            <div id="user-dropdown-menu" class="hidden">
                <div class="menu-item" onclick="openSettingsModal()">
                    <span class="custom-icon icon-settings"></span> Settings
                </div>
                <div class="menu-item" onclick="logoutUser()">
                    <span class="custom-icon icon-logout"></span> Log Out
                </div>
            </div>

            <div id="friends-panel" class="scrollable">
                <div class="friends-header">
                    <button class="icon-button"><span class="custom-icon icon-user-group"></span> Friends</button>
                </div>
                
                <div id="friend-list-tabs">
                    <button class="tab-button active" data-tab="online">In Network</button>
                    <button class="tab-button" data-tab="pending">Pending (<span id="pending-count">0</span>)</button>
                </div>
                
                <div class="search-bar-container">
                    <input type="text" id="friend-search-input" placeholder="Search friends">
                </div>

                <ul id="online-friends" class="friend-list-view active">
                    </ul>
                
                <ul id="pending-invites" class="friend-list-view hidden">
                    </ul>
                
                <div class="add-friend-section">
                    <input type="text" id="add-friend-input" placeholder="Add by username...">
                    <button onclick="sendFriendInvite()">Add</button>
                    <p id="invite-status"></p>
                </div>
            </div>
        </div>

        <div id="private-chat-area">
            <header id="chat-header">
                <h2>Select a friend to start a conversation.</h2>
            </header>
            
            <div id="messages-container" class="scrollable">
                </div>
            
            <div id="message-input-area" class="hidden">
                
                <div class="media-buttons">
                    <button class="icon-button" id="voice-record-button" title="Voice Message">
                        <span class="custom-icon icon-mic"></span>
                    </button> 
                    
                    <label for="file-upload" class="icon-button" title="Attach File">
                        <span class="custom-icon icon-paperclip"></span>
                    </label>
                    <input type="file" id="file-upload" style="display: none;" onchange="handleFileUpload(event)">
                </div>

                <div class="custom-textbox-wrapper">
                    <textarea id="message-input" placeholder="Send a message..." rows="1"></textarea>
                    <button id="send-button">
                        <span class="custom-icon icon-send"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeSettingsModal()">
                <span class="custom-icon icon-close"></span>
            </span>
            <h2>User Settings - NeoCord</h2>
            
            <div class="setting-section">
                <h3>Profile Picture</h3>
                <div id="setting-avatar-preview" class="profile-avatar large-avatar"></div>
                <input type="file" id="avatar-upload-input" accept="image/*" style="margin: 10px 0;">
                <button onclick="saveAvatar()">Save New Avatar</button>
            </div>
            
            <div class="setting-section">
                <h3>Account Details</h3>
                <label for="new-username">Username:</label>
                <input type="text" id="new-username" disabled>
                <p><small style="color: #99aab5;">Username changes are not supported in this version.</small></p>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>